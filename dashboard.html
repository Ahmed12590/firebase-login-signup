<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Employee CRM Dashboard</title>

    <link rel="stylesheet" href="style.css">

</head>

<body>
    <aside class="sidebar">
        <h2>CRM</h2>
        <ul>
            <li class="active">Dashboard</li>
            <li>Employees</li>
            <li>Attendance</li>
            <li>Tasks</li>
            <li>Reports</li>
            <li>Settings</li>
        </ul>
    </aside>

    <main class="main-content">
        <header>
            <h1>Welcome </h1>
            <button id="logoutBtn">Logout</button>
        </header>

        <section class="cards">
            <div class="card">Total Employees: 12</div>
            <div class="card">Present Today: 10</div>
            <div class="card">Pending Tasks: 4</div>
        </section>

        <section class="table-section">
            <h2>Recent Employees</h2>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="employeeTable">
                    <tr>
                        <td>Ali</td>
                        <td>Designer</td>
                        <td>Active</td>
                    </tr>
                    <tr>
                        <td>Sarah</td>
                        <td>Developer</td>
                        <td>Inactive</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

        // Same Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyCEV4Nlpu7Hr-BxKyNHMl0r8SCYaVcQW1o",
            authDomain: "ahmed-backend-7c222.firebaseapp.com",
            projectId: "ahmed-backend-7c222",
            storageBucket: "ahmed-backend-7c222.firebasestorage.app",
            messagingSenderId: "716742749301",
            appId: "1:716742749301:web:2e9557caa4902984c11c3c",
            measurementId: "G-WCBF37XTH5"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // ðŸ§© Check if user is logged in
        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById("userEmail").textContent = "Logged in as: " + user.email;
            } else {
                // If not logged in â†’ redirect to login page
                window.location.href = "index.html";
            }
        });

        // ðŸ§© Logout button
        document.getElementById("logoutBtn").addEventListener("click", async () => {
            await signOut(auth);
            window.location.href = "index.html";
        });
    </script>
</body>

</html>